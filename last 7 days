* Trigger: On the page - Set up dynamic tags to get accurate dates.

<div id="latest-post-meta" data-category="operations-notifications" data-date="2025-04-10" style="display:none;"></div>

_______________________________
* Elementor > Custom Code

<script>
document.addEventListener('DOMContentLoaded', function () {
  function triggerPopupWhenReady() {
    if (
      typeof elementorProFrontend !== 'undefined' &&
      elementorProFrontend.modules &&
      elementorProFrontend.modules.popup
    ) {
      const meta = document.getElementById('latest-post-meta');
      if (meta) {
        const category = meta.getAttribute('data-category');
        const dateStr = meta.getAttribute('data-date'); // Format: YYYY-MM-DD
        const postDate = new Date(dateStr);
        const today = new Date();
        const daysDiff = Math.floor((today - postDate) / (1000 * 60 * 60 * 24));

        if (category === 'operations-notifications' && daysDiff <= 7) {
        //if (category === 'operations-notifications' && daysDiff <= 7 && !sessionStorage.getItem('recentNewsPopup')) {
          elementorProFrontend.modules.popup.showPopup({ id: 12961 });
          // can remove this part for user's session. i.e. it will popup everytime intranet is loaded up
          // sessionStorage.setItem('recentNewsPopup', 'yes');
        }
      }
    } else {
      setTimeout(triggerPopupWhenReady, 100);
    }
  }

  triggerPopupWhenReady();
});
</script>
